{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.analyticsVideoPlugins = t() : e.analyticsVideoPlugins = t();\n}(window, function () {\n  return function (e) {\n    var t = {};\n\n    function a(n) {\n      if (t[n]) return t[n].exports;\n      var i = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(i.exports, i, i.exports, a), i.l = !0, i.exports;\n    }\n\n    return a.m = e, a.c = t, a.d = function (e, t, n) {\n      a.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, a.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, a.t = function (e, t) {\n      if (1 & t && (e = a(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (a.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var i in e) a.d(n, i, function (t) {\n        return e[t];\n      }.bind(null, i));\n      return n;\n    }, a.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return a.d(t, \"a\", t), t;\n    }, a.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, a.p = \"\", a(a.s = 2);\n  }([function (e, t, a) {\n    \"use strict\";\n\n    a.r(t);\n    var n = \"function\" == typeof fetch ? fetch.bind() : function (e, t) {\n      return t = t || {}, new Promise(function (a, n) {\n        var i = new XMLHttpRequest();\n\n        for (var r in i.open(t.method || \"get\", e, !0), t.headers) i.setRequestHeader(r, t.headers[r]);\n\n        function o() {\n          var e,\n              t = [],\n              a = [],\n              n = {};\n          return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm, function (i, r, o) {\n            t.push(r = r.toLowerCase()), a.push([r, o]), e = n[r], n[r] = e ? e + \",\" + o : o;\n          }), {\n            ok: 2 == (i.status / 100 | 0),\n            status: i.status,\n            statusText: i.statusText,\n            url: i.responseURL,\n            clone: o,\n            text: function () {\n              return Promise.resolve(i.responseText);\n            },\n            json: function () {\n              return Promise.resolve(i.responseText).then(JSON.parse);\n            },\n            blob: function () {\n              return Promise.resolve(new Blob([i.response]));\n            },\n            headers: {\n              keys: function () {\n                return t;\n              },\n              entries: function () {\n                return a;\n              },\n              get: function (e) {\n                return n[e.toLowerCase()];\n              },\n              has: function (e) {\n                return e.toLowerCase() in n;\n              }\n            }\n          };\n        }\n\n        i.withCredentials = \"include\" == t.credentials, i.onload = function () {\n          a(o());\n        }, i.onerror = n, i.send(t.body);\n      });\n    };\n    t.default = n;\n  }, function (e, t, a) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var n = function () {\n      function e(e, t) {\n        for (var a = 0; a < t.length; a++) {\n          var n = t[a];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n        }\n      }\n\n      return function (t, a, n) {\n        return a && e(t.prototype, a), n && e(t, n), t;\n      };\n    }();\n\n    var i = function () {\n      function e(t, a) {\n        !function (e, t) {\n          if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, e), this.pluginName = t;\n      }\n\n      return n(e, [{\n        key: \"track\",\n        value: function (e, t) {\n          window.analytics.track(e, t, {\n            integration: {\n              name: this.pluginName\n            }\n          });\n        }\n      }]), e;\n    }();\n\n    t.default = i;\n  }, function (e, t, a) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.YouTubeAnalytics = t.VimeoAnalytics = void 0;\n    var n = r(a(3)),\n        i = r(a(4));\n\n    function r(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n\n    t.VimeoAnalytics = n.default, t.YouTubeAnalytics = i.default;\n  }, function (e, t, a) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var n = function () {\n      function e(e, t) {\n        for (var a = 0; a < t.length; a++) {\n          var n = t[a];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n        }\n      }\n\n      return function (t, a, n) {\n        return a && e(t.prototype, a), n && e(t, n), t;\n      };\n    }(),\n        i = r(a(0));\n\n    function r(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n\n    var o = function (e) {\n      function t(e, a) {\n        !function (e, t) {\n          if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n\n        var n = function (e, t) {\n          if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n        }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, \"VimeoAnalytics\"));\n\n        return n.authToken = a, n.player = e, n.metadata = {\n          content: {},\n          playback: {\n            videoPlayer: \"Vimeo\"\n          }\n        }, n.mostRecentHeartbeat = 0, n.isPaused = !1, n;\n      }\n\n      return function (e, t) {\n        if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);\n        e.prototype = Object.create(t && t.prototype, {\n          constructor: {\n            value: e,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n      }(t, e), n(t, [{\n        key: \"initialize\",\n        value: function () {\n          var e = this,\n              t = {\n            loaded: this.retrieveMetadata,\n            play: this.trackPlay,\n            pause: this.trackPause,\n            ended: this.trackEnded,\n            timeupdate: this.trackHeartbeat\n          };\n\n          for (var a in t) this.registerHandler(a, t[a]);\n\n          this.player.getVideoId().then(function (t) {\n            e.retrieveMetadata({\n              id: t\n            });\n          }).catch(console.error);\n        }\n      }, {\n        key: \"registerHandler\",\n        value: function (e, t) {\n          var a = this;\n          this.player.on(e, function (e) {\n            a.updateMetadata(e), t.call(a, e);\n          });\n        }\n      }, {\n        key: \"trackPlay\",\n        value: function () {\n          this.isPaused ? (this.track(\"Video Playback Resumed\", this.metadata.playback), this.isPaused = !1) : (this.track(\"Video Playback Started\", this.metadata.playback), this.track(\"Video Content Started\", this.metadata.content));\n        }\n      }, {\n        key: \"trackEnded\",\n        value: function () {\n          this.track(\"Video Playback Completed\", this.metadata.playback), this.track(\"Video Content Completed\", this.metadata.content);\n        }\n      }, {\n        key: \"trackHeartbeat\",\n        value: function () {\n          var e = this.mostRecentHeartbeat,\n              t = this.metadata.playback.position;\n          t !== e && t - e >= 10 && (this.track(\"Video Content Playing\", this.metadata.content), this.mostRecentHeartbeat = Math.floor(t));\n        }\n      }, {\n        key: \"trackPause\",\n        value: function () {\n          this.isPaused = !0, this.track(\"Video Playback Paused\", this.metadata.playback);\n        }\n      }, {\n        key: \"retrieveMetadata\",\n        value: function (e) {\n          var t = this;\n          return new Promise(function (a, n) {\n            var r = e.id;\n            (0, i.default)(\"https://api.vimeo.com/videos/\" + r, {\n              headers: {\n                Authorization: \"Bearer \" + t.authToken\n              }\n            }).then(function (e) {\n              return e.ok ? e.json() : n(e);\n            }).then(function (e) {\n              t.metadata.content.title = e.name, t.metadata.content.description = e.description, t.metadata.content.publisher = e.user.name, t.metadata.playback.position = 0, t.metadata.playback.totalLength = e.duration;\n            }).catch(function (e) {\n              return console.error(\"Request to Vimeo API Failed with: \", e), n(e);\n            });\n          });\n        }\n      }, {\n        key: \"updateMetadata\",\n        value: function (e) {\n          var t = this;\n          return new Promise(function (a, n) {\n            t.player.getVolume().then(function (n) {\n              n && (t.metadata.playback.sound = 100 * n), t.metadata.playback.position = e.seconds, a();\n            }).catch(n);\n          });\n        }\n      }]), t;\n    }(r(a(1)).default);\n\n    t.default = o;\n  }, function (e, t, a) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var n = function () {\n      function e(e, t) {\n        for (var a = 0; a < t.length; a++) {\n          var n = t[a];\n          n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n        }\n      }\n\n      return function (t, a, n) {\n        return a && e(t.prototype, a), n && e(t, n), t;\n      };\n    }(),\n        i = o(a(0)),\n        r = o(a(1));\n\n    function o(e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    }\n\n    var s = function (e) {\n      function t(e, a) {\n        !function (e, t) {\n          if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, t);\n\n        var n = function (e, t) {\n          if (!e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          return !t || \"object\" != typeof t && \"function\" != typeof t ? e : t;\n        }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, \"YoutubeAnalytics\"));\n\n        return n.player = e, n.apiKey = a, n.playerLoaded = !1, n.playbackStarted = !1, n.contentStarted = !1, n.isPaused = !1, n.isBuffering = !1, n.isSeeking = !1, n.lastRecordedTime = {\n          timeReported: Date.now(),\n          timeElapsed: 0\n        }, n.metadata = [{\n          playback: {\n            video_player: \"youtube\"\n          },\n          content: {}\n        }], n.playlistIndex = 0, n;\n      }\n\n      return function (e, t) {\n        if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function, not \" + typeof t);\n        e.prototype = Object.create(t && t.prototype, {\n          constructor: {\n            value: e,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);\n      }(t, e), n(t, [{\n        key: \"initialize\",\n        value: function () {\n          window.segmentYoutubeOnStateChange = this.onPlayerStateChange.bind(this), window.segmentYoutubeOnReady = this.onPlayerReady.bind(this), this.player.addEventListener(\"onReady\", \"segmentYoutubeOnReady\"), this.player.addEventListener(\"onStateChange\", \"segmentYoutubeOnStateChange\");\n        }\n      }, {\n        key: \"onPlayerReady\",\n        value: function (e) {\n          this.retrieveMetadata();\n        }\n      }, {\n        key: \"onPlayerStateChange\",\n        value: function (e) {\n          var t = this.player.getCurrentTime();\n\n          switch (this.metadata[this.playlistIndex] && (this.metadata[this.playlistIndex].playback.position = this.metadata[this.playlistIndex].content.position = t, this.metadata[this.playlistIndex].playback.quality = this.player.getPlaybackQuality(), this.metadata[this.playlistIndex].playback.sound = this.player.isMuted() ? 0 : this.player.getVolume()), e.data) {\n            case -1:\n              if (this.playerLoaded) break;\n              this.retrieveMetadata(), this.playerLoaded = !0;\n              break;\n\n            case YT.PlayerState.BUFFERING:\n              this.handleBuffer();\n              break;\n\n            case YT.PlayerState.PLAYING:\n              this.handlePlay();\n              break;\n\n            case YT.PlayerState.PAUSED:\n              this.handlePause();\n              break;\n\n            case YT.PlayerState.ENDED:\n              this.handleEnd();\n          }\n\n          this.lastRecordedTime = {\n            timeReported: Date.now(),\n            timeElapsed: 1e3 * this.player.getCurrentTime()\n          };\n        }\n      }, {\n        key: \"retrieveMetadata\",\n        value: function () {\n          var e = this;\n          return new Promise(function (t, a) {\n            var n = e.player.getVideoData(),\n                r = e.player.getPlaylist() || [n.video_id],\n                o = r.join();\n            (0, i.default)(\"https://www.googleapis.com/youtube/v3/videos?id=\" + o + \"&part=snippet,contentDetails&key=\" + e.apiKey).then(function (e) {\n              if (!e.ok) {\n                var t = new Error(\"Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)\");\n                throw t.response = e, t;\n              }\n\n              return e.json();\n            }).then(function (a) {\n              e.metadata = [];\n\n              for (var n = 0, i = 0; i < r.length; i++) {\n                var o = a.items[i];\n                e.metadata.push({\n                  content: {\n                    title: o.snippet.title,\n                    description: o.snippet.description,\n                    keywords: o.snippet.tags,\n                    channel: o.snippet.channelTitle,\n                    airdate: o.snippet.publishedAt\n                  }\n                }), n += l(o.contentDetails.duration);\n              }\n\n              for (i = 0; i < r.length; i++) e.metadata[i].playback = {\n                total_length: n,\n                video_player: \"youtube\"\n              };\n\n              t();\n            }).catch(function (t) {\n              e.metadata = r.map(function (e) {\n                return {\n                  playback: {\n                    video_player: \"youtube\"\n                  },\n                  content: {}\n                };\n              }), a(t);\n            });\n          });\n        }\n      }, {\n        key: \"handleBuffer\",\n        value: function () {\n          var e = this.determineSeek();\n          this.playbackStarted || (this.playbackStarted = !0, this.track(\"Video Playback Started\", this.metadata[this.playlistIndex].playback)), e && !this.isSeeking && (this.isSeeking = !0, this.track(\"Video Playback Seek Started\", this.metadata[this.playlistIndex].playback)), this.isSeeking && (this.track(\"Video Playback Seek Completed\", this.metadata[this.playlistIndex].playback), this.isSeeking = !1);\n          var t = this.player.getPlaylist();\n          t && 0 === this.player.getCurrentTime() && this.player.getPlaylistIndex() !== this.playlistIndex && (this.contentStarted = !1, this.playlistIndex === t.length - 1 && 0 === this.player.getPlaylistIndex() && (this.track(\"Video Playback Completed\", this.metadata[this.player.getPlaylistIndex()].playback), this.track(\"Video Playback Started\", this.metadata[this.player.getPlaylistIndex()].playback))), this.track(\"Video Playback Buffer Started\", this.metadata[this.playlistIndex].playback), this.isBuffering = !0;\n        }\n      }, {\n        key: \"handlePlay\",\n        value: function () {\n          this.contentStarted || (this.playlistIndex = this.player.getPlaylistIndex(), -1 === this.playlistIndex && (this.playlistIndex = 0), this.track(\"Video Content Started\", this.metadata[this.playlistIndex].content), this.contentStarted = !0), this.isBuffering && (this.track(\"Video Playback Buffer Completed\", this.metadata[this.playlistIndex].playback), this.isBuffering = !1), this.isPaused && (this.track(\"Video Playback Resumed\", this.metadata[this.playlistIndex].playback), this.isPaused = !1);\n        }\n      }, {\n        key: \"handlePause\",\n        value: function () {\n          var e = this.determineSeek();\n          this.isBuffering && (this.track(\"Video Playback Buffer Completed\", this.metadata[this.playlistIndex].playback), this.isBuffering = !1), this.isPaused || (e ? (this.track(\"Video Playback Seek Started\", this.metadata[this.playlistIndex].playback), this.isSeeking = !0) : (this.track(\"Video Playback Paused\", this.metadata[this.playlistIndex].playback), this.isPaused = !0));\n        }\n      }, {\n        key: \"handleEnd\",\n        value: function () {\n          this.track(\"Video Content Completed\", this.metadata[this.playlistIndex].content), this.contentStarted = !1;\n          var e = this.player.getPlaylistIndex(),\n              t = this.player.getPlaylist();\n          (t && e === t.length - 1 || -1 === e) && (this.track(\"Video Playback Completed\", this.metadata[this.playlistIndex].playback), this.playbackStarted = !1);\n        }\n      }, {\n        key: \"determineSeek\",\n        value: function () {\n          var e = this.isPaused || this.isBuffering ? 0 : Date.now() - this.lastRecordedTime.timeReported,\n              t = 1e3 * this.player.getCurrentTime() - this.lastRecordedTime.timeElapsed;\n          return Math.abs(e - t) > 2e3;\n        }\n      }]), t;\n    }(r.default);\n\n    function l(e) {\n      var t = e.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);\n      return t = t.slice(1).map(function (e) {\n        if (null != e) return e.replace(/\\D/, \"\");\n      }), 3600 * (parseInt(t[0]) || 0) + 60 * (parseInt(t[1]) || 0) + (parseInt(t[2]) || 0);\n    }\n\n    t.default = s;\n  }]);\n});","map":{"version":3,"sources":["/Users/apple/Sites/react-typescript-template/node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js"],"names":["e","t","exports","module","define","amd","analyticsVideoPlugins","window","a","n","i","l","call","m","c","d","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","fetch","Promise","XMLHttpRequest","open","method","headers","setRequestHeader","getAllResponseHeaders","replace","push","toLowerCase","ok","status","statusText","url","responseURL","clone","text","resolve","responseText","json","then","JSON","parse","blob","Blob","response","keys","entries","has","withCredentials","credentials","onload","onerror","send","body","length","configurable","writable","key","TypeError","pluginName","analytics","track","integration","name","YouTubeAnalytics","VimeoAnalytics","ReferenceError","__proto__","getPrototypeOf","authToken","player","metadata","content","playback","videoPlayer","mostRecentHeartbeat","isPaused","constructor","setPrototypeOf","loaded","retrieveMetadata","play","trackPlay","pause","trackPause","ended","trackEnded","timeupdate","trackHeartbeat","registerHandler","getVideoId","id","catch","console","error","on","updateMetadata","position","Math","floor","Authorization","title","description","publisher","user","totalLength","duration","getVolume","sound","seconds","apiKey","playerLoaded","playbackStarted","contentStarted","isBuffering","isSeeking","lastRecordedTime","timeReported","Date","now","timeElapsed","video_player","playlistIndex","segmentYoutubeOnStateChange","onPlayerStateChange","segmentYoutubeOnReady","onPlayerReady","addEventListener","getCurrentTime","quality","getPlaybackQuality","isMuted","data","YT","PlayerState","BUFFERING","handleBuffer","PLAYING","handlePlay","PAUSED","handlePause","ENDED","handleEnd","getVideoData","getPlaylist","video_id","join","Error","items","snippet","keywords","tags","channel","channelTitle","airdate","publishedAt","contentDetails","total_length","map","determineSeek","getPlaylistIndex","abs","match","slice","parseInt"],"mappings":"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","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.analyticsVideoPlugins=t():e.analyticsVideoPlugins=t()}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=2)}([function(e,t,a){\"use strict\";a.r(t);var n=\"function\"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(a,n){var i=new XMLHttpRequest;for(var r in i.open(t.method||\"get\",e,!0),t.headers)i.setRequestHeader(r,t.headers[r]);function o(){var e,t=[],a=[],n={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,(function(i,r,o){t.push(r=r.toLowerCase()),a.push([r,o]),e=n[r],n[r]=e?e+\",\"+o:o})),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return a},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}i.withCredentials=\"include\"==t.credentials,i.onload=function(){a(o())},i.onerror=n,i.send(t.body)}))};t.default=n},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.pluginName=t}return n(e,[{key:\"track\",value:function(e,t){window.analytics.track(e,t,{integration:{name:this.pluginName}})}}]),e}();t.default=i},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.YouTubeAnalytics=t.VimeoAnalytics=void 0;var n=r(a(3)),i=r(a(4));function r(e){return e&&e.__esModule?e:{default:e}}t.VimeoAnalytics=n.default,t.YouTubeAnalytics=i.default},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=r(a(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"VimeoAnalytics\"));return n.authToken=a,n.player=e,n.metadata={content:{},playback:{videoPlayer:\"Vimeo\"}},n.mostRecentHeartbeat=0,n.isPaused=!1,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){var e=this,t={loaded:this.retrieveMetadata,play:this.trackPlay,pause:this.trackPause,ended:this.trackEnded,timeupdate:this.trackHeartbeat};for(var a in t)this.registerHandler(a,t[a]);this.player.getVideoId().then((function(t){e.retrieveMetadata({id:t})})).catch(console.error)}},{key:\"registerHandler\",value:function(e,t){var a=this;this.player.on(e,(function(e){a.updateMetadata(e),t.call(a,e)}))}},{key:\"trackPlay\",value:function(){this.isPaused?(this.track(\"Video Playback Resumed\",this.metadata.playback),this.isPaused=!1):(this.track(\"Video Playback Started\",this.metadata.playback),this.track(\"Video Content Started\",this.metadata.content))}},{key:\"trackEnded\",value:function(){this.track(\"Video Playback Completed\",this.metadata.playback),this.track(\"Video Content Completed\",this.metadata.content)}},{key:\"trackHeartbeat\",value:function(){var e=this.mostRecentHeartbeat,t=this.metadata.playback.position;t!==e&&t-e>=10&&(this.track(\"Video Content Playing\",this.metadata.content),this.mostRecentHeartbeat=Math.floor(t))}},{key:\"trackPause\",value:function(){this.isPaused=!0,this.track(\"Video Playback Paused\",this.metadata.playback)}},{key:\"retrieveMetadata\",value:function(e){var t=this;return new Promise((function(a,n){var r=e.id;(0,i.default)(\"https://api.vimeo.com/videos/\"+r,{headers:{Authorization:\"Bearer \"+t.authToken}}).then((function(e){return e.ok?e.json():n(e)})).then((function(e){t.metadata.content.title=e.name,t.metadata.content.description=e.description,t.metadata.content.publisher=e.user.name,t.metadata.playback.position=0,t.metadata.playback.totalLength=e.duration})).catch((function(e){return console.error(\"Request to Vimeo API Failed with: \",e),n(e)}))}))}},{key:\"updateMetadata\",value:function(e){var t=this;return new Promise((function(a,n){t.player.getVolume().then((function(n){n&&(t.metadata.playback.sound=100*n),t.metadata.playback.position=e.seconds,a()})).catch(n)}))}}]),t}(r(a(1)).default);t.default=o},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"YoutubeAnalytics\"));return n.player=e,n.apiKey=a,n.playerLoaded=!1,n.playbackStarted=!1,n.contentStarted=!1,n.isPaused=!1,n.isBuffering=!1,n.isSeeking=!1,n.lastRecordedTime={timeReported:Date.now(),timeElapsed:0},n.metadata=[{playback:{video_player:\"youtube\"},content:{}}],n.playlistIndex=0,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){window.segmentYoutubeOnStateChange=this.onPlayerStateChange.bind(this),window.segmentYoutubeOnReady=this.onPlayerReady.bind(this),this.player.addEventListener(\"onReady\",\"segmentYoutubeOnReady\"),this.player.addEventListener(\"onStateChange\",\"segmentYoutubeOnStateChange\")}},{key:\"onPlayerReady\",value:function(e){this.retrieveMetadata()}},{key:\"onPlayerStateChange\",value:function(e){var t=this.player.getCurrentTime();switch(this.metadata[this.playlistIndex]&&(this.metadata[this.playlistIndex].playback.position=this.metadata[this.playlistIndex].content.position=t,this.metadata[this.playlistIndex].playback.quality=this.player.getPlaybackQuality(),this.metadata[this.playlistIndex].playback.sound=this.player.isMuted()?0:this.player.getVolume()),e.data){case-1:if(this.playerLoaded)break;this.retrieveMetadata(),this.playerLoaded=!0;break;case YT.PlayerState.BUFFERING:this.handleBuffer();break;case YT.PlayerState.PLAYING:this.handlePlay();break;case YT.PlayerState.PAUSED:this.handlePause();break;case YT.PlayerState.ENDED:this.handleEnd()}this.lastRecordedTime={timeReported:Date.now(),timeElapsed:1e3*this.player.getCurrentTime()}}},{key:\"retrieveMetadata\",value:function(){var e=this;return new Promise((function(t,a){var n=e.player.getVideoData(),r=e.player.getPlaylist()||[n.video_id],o=r.join();(0,i.default)(\"https://www.googleapis.com/youtube/v3/videos?id=\"+o+\"&part=snippet,contentDetails&key=\"+e.apiKey).then((function(e){if(!e.ok){var t=new Error(\"Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)\");throw t.response=e,t}return e.json()})).then((function(a){e.metadata=[];for(var n=0,i=0;i<r.length;i++){var o=a.items[i];e.metadata.push({content:{title:o.snippet.title,description:o.snippet.description,keywords:o.snippet.tags,channel:o.snippet.channelTitle,airdate:o.snippet.publishedAt}}),n+=l(o.contentDetails.duration)}for(i=0;i<r.length;i++)e.metadata[i].playback={total_length:n,video_player:\"youtube\"};t()})).catch((function(t){e.metadata=r.map((function(e){return{playback:{video_player:\"youtube\"},content:{}}})),a(t)}))}))}},{key:\"handleBuffer\",value:function(){var e=this.determineSeek();this.playbackStarted||(this.playbackStarted=!0,this.track(\"Video Playback Started\",this.metadata[this.playlistIndex].playback)),e&&!this.isSeeking&&(this.isSeeking=!0,this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback)),this.isSeeking&&(this.track(\"Video Playback Seek Completed\",this.metadata[this.playlistIndex].playback),this.isSeeking=!1);var t=this.player.getPlaylist();t&&0===this.player.getCurrentTime()&&this.player.getPlaylistIndex()!==this.playlistIndex&&(this.contentStarted=!1,this.playlistIndex===t.length-1&&0===this.player.getPlaylistIndex()&&(this.track(\"Video Playback Completed\",this.metadata[this.player.getPlaylistIndex()].playback),this.track(\"Video Playback Started\",this.metadata[this.player.getPlaylistIndex()].playback))),this.track(\"Video Playback Buffer Started\",this.metadata[this.playlistIndex].playback),this.isBuffering=!0}},{key:\"handlePlay\",value:function(){this.contentStarted||(this.playlistIndex=this.player.getPlaylistIndex(),-1===this.playlistIndex&&(this.playlistIndex=0),this.track(\"Video Content Started\",this.metadata[this.playlistIndex].content),this.contentStarted=!0),this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused&&(this.track(\"Video Playback Resumed\",this.metadata[this.playlistIndex].playback),this.isPaused=!1)}},{key:\"handlePause\",value:function(){var e=this.determineSeek();this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused||(e?(this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback),this.isSeeking=!0):(this.track(\"Video Playback Paused\",this.metadata[this.playlistIndex].playback),this.isPaused=!0))}},{key:\"handleEnd\",value:function(){this.track(\"Video Content Completed\",this.metadata[this.playlistIndex].content),this.contentStarted=!1;var e=this.player.getPlaylistIndex(),t=this.player.getPlaylist();(t&&e===t.length-1||-1===e)&&(this.track(\"Video Playback Completed\",this.metadata[this.playlistIndex].playback),this.playbackStarted=!1)}},{key:\"determineSeek\",value:function(){var e=this.isPaused||this.isBuffering?0:Date.now()-this.lastRecordedTime.timeReported,t=1e3*this.player.getCurrentTime()-this.lastRecordedTime.timeElapsed;return Math.abs(e-t)>2e3}}]),t}(r.default);function l(e){var t=e.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);return t=t.slice(1).map((function(e){if(null!=e)return e.replace(/\\D/,\"\")})),3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}t.default=s}])}));"]},"metadata":{},"sourceType":"script"}