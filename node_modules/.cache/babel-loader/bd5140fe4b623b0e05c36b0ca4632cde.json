{"ast":null,"code":"import { __spreadArray } from \"tslib\";\nexport function groupBy(collection, grouper) {\n  var results = {};\n  collection.forEach(function (item) {\n    var _a;\n\n    var key = undefined;\n\n    if (typeof grouper === 'string') {\n      var suggestedKey = item[grouper];\n      key = typeof suggestedKey !== 'string' ? JSON.stringify(suggestedKey) : suggestedKey;\n    } else if (grouper instanceof Function) {\n      key = grouper(item);\n    }\n\n    if (key === undefined) {\n      return;\n    }\n\n    results[key] = __spreadArray(__spreadArray([], (_a = results[key]) !== null && _a !== void 0 ? _a : [], true), [item], false);\n  });\n  return results;\n}","map":{"version":3,"sources":["/Users/apple/Sites/react-typescript-template/node_modules/@segment/analytics-next/src/lib/group-by.ts"],"names":[],"mappings":";AAEA,OAAM,SAAU,OAAV,CACJ,UADI,EAEJ,OAFI,EAEyB;AAE7B,MAAM,OAAO,GAAwB,EAArC;AAEA,EAAA,UAAU,CAAC,OAAX,CAAmB,UAAC,IAAD,EAAK;;;AACtB,QAAI,GAAG,GAAgC,SAAvC;;AAEA,QAAI,OAAO,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,UAAM,YAAY,GAAG,IAAI,CAAC,OAAD,CAAzB;AACA,MAAA,GAAG,GACD,OAAO,YAAP,KAAwB,QAAxB,GACI,IAAI,CAAC,SAAL,CAAe,YAAf,CADJ,GAEI,YAHN;AAID,KAND,MAMO,IAAI,OAAO,YAAY,QAAvB,EAAiC;AACtC,MAAA,GAAG,GAAG,OAAO,CAAC,IAAD,CAAb;AACD;;AAED,QAAI,GAAG,KAAK,SAAZ,EAAuB;AACrB;AACD;;AAED,IAAA,OAAO,CAAC,GAAD,CAAP,GAAY,aAAA,CAAA,aAAA,CAAA,EAAA,EAAQ,CAAA,EAAA,GAAA,OAAO,CAAC,GAAD,CAAP,MAAY,IAAZ,IAAY,EAAA,KAAA,KAAA,CAAZ,GAAY,EAAZ,GAAgB,EAAxB,EAA2B,IAA3B,CAAA,EAA2B,CAAE,IAAF,CAA3B,EAAiC,KAAjC,CAAZ;AACD,GAlBD;AAoBA,SAAO,OAAP;AACD","sourcesContent":["type Grouper<T> = (obj: T) => string | number\n\nexport function groupBy<T>(\n  collection: T[],\n  grouper: keyof T | Grouper<T>\n): Record<string, T[]> {\n  const results: Record<string, T[]> = {}\n\n  collection.forEach((item) => {\n    let key: string | number | undefined = undefined\n\n    if (typeof grouper === 'string') {\n      const suggestedKey = item[grouper]\n      key =\n        typeof suggestedKey !== 'string'\n          ? JSON.stringify(suggestedKey)\n          : suggestedKey\n    } else if (grouper instanceof Function) {\n      key = grouper(item)\n    }\n\n    if (key === undefined) {\n      return\n    }\n\n    results[key] = [...(results[key] ?? []), item]\n  })\n\n  return results\n}\n"]},"metadata":{},"sourceType":"module"}